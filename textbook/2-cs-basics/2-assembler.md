# Ассемблер
Инструкции для Боба, то есть так называемый *машинный код*, представлен в памяти как
набор последовательно идущих чисел. 
Бобу крайне легко понимать и исполнять инструкции.
Он, всё-таки, не человек, а кусок кремния, который магическим образом
заставили думать. А вот для неподготовленного человека инструкции выглядят
совершенно бессмысленно. Попробуй посмотреть на последовательность чисел и понять,
что она значит - ничего не получится. Однако они не могут взяться
из воздуха, их должен написать программист, а программист - это человек.

Следовательно, каждому программисту необходимо наизусть выучить все инструкции и самому
стать как Боб. Запомнить длину, назначение и структуру каждой инструкции, чтобы
научиться их писать. Стать ходячим биологическим компьютером... Сотни разных инструкций...
Можно с ума сойти... Но программистам хорошо платят, поэтому это стоит того... Так ведь???

<img 
    src="/artwork/cs-101/tired-programmer.png" 
    alt='Уставший программист. Надпись: "День 3. Наконец смог вывести на экран Hello, world"'
/>

Спойлер: это не стоит того. Чтобы было понятнее, рассмотрим аналогию с шахматной нотацией.
Она нужна, чтобы компактно описывать последовательности ходов (почти как последовательности
инструкций!). Например, для дебюта четырёх коней (довольно популярной тактики в
начальной стадии игры) ходы описываются следующим образом:

```
1. e4  e5
2. Kf3 Kc6
3. Kc3 Kf6
```

Если человек серьёзно занимается шахматами, то ему это будет понятно.
А для всех остальных такая запись будет всего лишь страшно выглядящей грудой букв и цифр.
То же самое можно сказать про процессорные инструкции в сыром виде. Только с ними ситуация
ещё хуже, потому что шахматная нотация хотя бы была создана для людей, а вот про процессорные
инструкции подобного сказать нельзя.

Но ведь эту последовательность ходов можно описать человеческим языком!

```
Ход 1. Белая пешка ходит с e2 на e4, чёрная пешка ходит с e7 на e5
Ход 2. Белый конь ходит с g1 на f3, чёрный конь ходит с b8 на c6
Ход 3. Второй белый конь ходит с b1 на c3, второй чёрный конь ходит с g8 на f6
```

<img class="universal" src="/artwork/cs-101/chess-board.jpg" alt="Шахматная доска"/>

Информация передаётся абсолютно та же самая, только теперь её сможет понять любой человек,
знающий правила шахмат. Да, получается более громоздко - за всё приходится платить свою цену.
Но если ваша цель - сделать информацию более доступной, то это полностью оправдано.

Процессорные инструкции тоже можно записать в более громоздком, но понятном человеку
виде. А потом использовать программу, переводящую их на язык, понятный процессору.

## Представляем вашему вниманию ассемблер и язык ассемблера
*Ассемблер* - это программа, переводящая инструкции, написанные на понятном человеку языке,
то есть на *языке ассемблера*, в формат, понятный процессору, то есть в машинный код.
Приведём пример, чтобы понять, с чем мы имеем дело. Возьмём последовательность
инструкций для процессора семейства x86. Тут четыре инструкции, закодированные при помощи 13-ти
байтов, каждый из которых представлен как обычное десятичное число:

```
184 57 5 0 0 187 228 0 0 72 1 216 80
```

Это настоящие инструкции, понятные процессору. Человеку же не понятно ничего, и разобраться в таком будет
крайне сложно, даже если постараться. Однако можно то же самое записать на языке ассемблера:

```asm
mov  rax,1337
mov  rbx,228
add  rax, rbx
push rax
```

Скорее всего тебе, читатель, такая запись тоже непонятна. Но она явно намного лучше, чем просто
последовательность чисел. Ниже представлены те же самые инструкции, но с пояснениями. Там упоминается слово "регистр".
*Регистр* - это небольшая ячейка памяти внутри самого процессора. В процессоре их несколько десятков.
Чтобы различать регистры, в языке ассемблера каждому из них даётся имя, например, `rax`, `rbx` и `rcx`. В прошлой
главе было сказано, что Боб может запоминать числа в своей голове - это и была метафора для регистров
процессора.

Вот тот же самый код, но с расшифровкой, чтобы не оставлять его назначение тайной:

```asm
mov  rax,1337 ; Помести в регистр rax число 1337
mov  rbx,228  ; Помести в регистр rbx число 228
add  rax,rbx  ; Прибавь к значению регистра rax значение регистра rbx
push rax      ; Запиши получившееся значение регистра rax в память компьютера
```

В результате всех этих действий в памяти компьютера окажется число, равное `1337 + 228 = 1565`.

Мини-вывод: ассемблер преобразовывает запись инструкций на языке ассемблера в 
машинный код, то есть в настоящие процессорные инструкции. Благодаря нему программистам больше
никогда не надо будет сходить с ума, печатая инструкции для процессора напрямую.
Провернуть преобразования в обратную сторону тоже можно. Программу, делающую это, называют *дизассемблером*.
Чаще всего дизассемблер применяют для того, чтобы лазать в чужих программах и анализировать их.
