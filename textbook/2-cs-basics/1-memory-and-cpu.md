<!-- TODO: объяснить, что в памяти можно хранить числа, большие 255, объединяя их
в несколько байтов -->

<!-- TODO: упомянуть регистры -->

<!-- TODO: упомянуть, что у процессоров бывают разные архитектуры -->

# Память и процессор компьютера

## Что вообще такое эта "оперативная память"?
Представь себе архивный шкаф со множеством ящиков. Ящики последовательно пронумерованы,
номер каждого из них уникален. В каждом ящике лежит бумага, на которой записано число от
0 до 255. В дальнейшем будем называть такое число "байтом". Зная номер ящика, можно открыть
его и посмотреть, какое число хранится внутри, либо стереть это число и записать новое.
Номер ящика будем называть его "адресом".

![Архивный шкаф](/artwork/cs-101/archive-cabinet.png)

Правда в современные компьютеры, как правило, ставят 16 гигабайт памяти, что равняется
16,777,216 байтам, поэтому данный шкаф скорее выглядел бы примерно так:

![Гигантский архивный шкаф](/artwork/cs-101/giant-archive-cabinet.png)

К счастью, в оперативной памяти компьютера эти числа хранятся не на бумажках, а в виде
электрических зарядов на кремниевом кристалле. Получается крайне компактно, да ещё
и чтение и запись информации происходят невероятно быстро.

![Плашка оперативной памяти](/artwork/cs-101/ram-stick.png)

## А что такое процессор?
Обычный шкаф, хранящий кучу чисел, полностью бесполезен. Он ведь только хранит
числа, а использовать их никак не может. К счастью, у нас в распоряжении есть
офисный работник по имени Боб, который может работать с этим шкафом, а также
делать ещё целую кучу вещей. К примеру, запоминать небольшое количество чисел
и производить с ними математические операции. Или работать с устройствами ввода/вывода,
к которым относятся жёсткие диски, SSD и другие постоянные носители информации,
мыши, клавиатуры, видеокарты, сетевые интерфейсы и прочее.

<!-- [TODO: добавить арт с Бобом] -->

Сам по себе Боб не знает, что ему надо делать: в собственной памяти он может хранить
совсем немного информации, инструкции по работе там не помещаются. Поэтому все инструкции
хранятся в шкафу. Для обычного человека эти инструкции выглядят всего лишь как наборы
бессмысленных чисел. А вот Боб с самого детства готовился к своей работе, поэтому он
отлично знает смысл каждой инструкции. Открывает ящик, видит там число и сразу понимает,
что ему надо делать.

Благодаря тому, что инструкции хранятся прямо в шкафу, Бобу не нужно запоминать их,
достаточно запомнить только номер ящика, в котором хранится следующая инструкция,
которую надо выполнить. Этот самый номер называется "курсором", потому что он "указывает"
на следующую инструкцию.

В памяти инструкции хранятся последовательно, одна за другой. Каждая инструкция занимает
разное число байт, однако Боб знает длину каждой инструкции. Следовательно, чтобы
получить адрес следующей инструкции, Боб увеличивает значение курсора на
число, равное длине текущей инструкции в байтах. Адрес инструкции - это номер
*первого* её байта.

По умолчанию Боб выполняет все инструкции в последовательном порядке, однако могут
быть и исключения. К примеру, есть инструкция, которую люди обычно обозначают как "JMP"
(Или "Jump"). Эта самая инструкция говорит Бобу, что надо "перепрыгнуть" в другую часть
памяти и начать выполнять инструкции там. <!-- [TODO: плохо объяснено, надо переделать] -->

Понятное дело, что на самом деле Боб - не человек, а кремниевый чип, заключённый между
печатной платой и металлической крышкой. Вот так поворот сюжета, сам Голливуд позавидует.

![Разобранный процессор](/artwork/cs-101/cpu-dissection.png)

Любопытный факт: получается, что в оперативной памяти компьютера одновременно хранятся
и сами программы (По сути, последовательности инструкций для Боба), и данные, с которыми
эти программы работают. С одной стороны, это удобно, а с другой - создаёт определённые
проблемы. Допустим, есть программа, которая скачивает картинки котиков с удалённого
сервера в Интернете и сохраняет их в оперативную память. А что, если сервер вместо
картинки котика передаст набор вредоносных инструкций для Боба? Казалось бы, ничего
страшного, эти инструкции просто сохранятся в памяти и будут там лежать без дела.
На самом деле это не так: существует древнее магическое искусство, включающее в себя
заклинания под названием "Переполнение буфера" и "Перезапись адреса возврата". Эти
самые заклинания позволяют обмануть Боба и заставить его выполнять вредоносные инструкции,
хранящиеся в произвольной области оперативной памяти, однако углубляться мы в это сейчас не
будем, так как тема довольно сложная.
